<?php

class m111016_191432_insert_common_disorders extends CDbMigration
{
	public function up()
	{
		$this->truncateTable('common_ophthalmic_disorder');
		$this->truncateTable('common_systemic_disorder');
		$this->truncateTable('disorder');

		$disorders = array(
                        array(  1482004,'Chalazion (disorder)','Chalazion',0),
                        array(  1674008,'Juvenile epithelial corneal dystrophy (disorder)','Meesman\'s corneal dystrophy',0),
                        array(  1763009,'Interstitial keratitis (disorder)','Interstitial keratitis',0),
                        array(  1847009,'Endophthalmitis (disorder)','Endophthalmitis',0),
                        array(  2055003,'Recurrent erosion of cornea (disorder)','Recurrent erosion of cornea',0),
                        array(  3577000,'Retinal lattice degeneration (disorder)','Retinal lattice degeneration',0),
                        array(  4210003,'Ocular hypertension (disorder)','Ocular hypertension',0),
                        array(  4855003,'Diabetic retinopathy (disorder)','Diabetic retinopathy',0),
                        array(  4927003,'Acute anterior uveitis (disorder)','Acute anterior uveitis',0),
                        array(  5587004,'Corneal dystrophy (disorder)','Corneal dystrophy',0),
                        array(  5888003,'Keratitis (disorder)','Keratitis',0),
                        array(  9826008,'Conjunctivitis (disorder)','Conjunctivitis',0),
                        array( 14748007,'Corneal ectasia (disorder)','Corneal ectasia',0),
                        array( 16596007,'Esotropia (disorder)','Esotropia',0),
                        array( 22440001,'Mooren\'s ulcer (disorder)','Mooren\'s ulcer',0),
                        array( 24010005,'Aphakia (disorder)','Aphakia',0),
                        array( 26098002,'Microcornea (disorder)','Microcornea',0),
                        array( 27590007,'Intermittent esotropia (disorder)','Intermittent esotropia',0),
                        array( 27971006,'Terrien\'s marginal degeneration of cornea (disorder)','Terrien\'s marginal degeneration of cornea',0),
                        array( 29504002,'Posterior polymorphous corneal dystrophy (disorder)','Polymorphous corneal dystrophy',0),
                        array( 29943008,'Herpes simplex dendritic keratitis (disorder)','Herpes simplex dendritic keratitis',0),
                        array( 30041005,'Acute angle-closure glaucoma (disorder)','Acute angle-closure glaucoma',0),
                        array( 30410001,'Paralytic ptosis (disorder)','Paralytic ptosis',0),
                        array( 30523006,'Degenerative drusen (disorder)','Degenerative drusen',0),
                        array( 31056006,'Orbital hemorrhage (disorder)','Orbital haemorrhage',0),
                        array( 31341008,'Vitreous hemorrhage (disorder)','Vitreous haemorrhage',0),
                        array( 33168009,'Entropion (disorder)','Entropion',0),
                        array( 33647009,'Anatomical narrow angle glaucoma (disorder)','Chronic angle-closure glaucoma',0),
                        array( 34250006,'Benign mucous membrane pemphigoid (disorder)','Benign mucous membrane pemphigoid',1),
                        array( 34361001,'Traumatic cataract (disorder)','Traumatic cataract',0),
                        array( 34533008,'Posterior subcapsular polar cataract (disorder)','Posterior subcapsular polar cataract',0),
                        array( 34711008,'Traction detachment of retina (disorder)','Traction detachment of retina',0),
                        array( 38101003,'Hypermetropia (disorder)','Hypermetropia',0),
                        array( 38583007,'Toxic cataract (disorder)','Toxic cataract',0),
                        array( 38599001,'Serous retinal detachment (disorder)','Serous retinal detachment',0),
                        array( 41446000,'Blepharitis (disorder)','Blepharitis',0),
                        array( 42059000,'Retinal detachment (disorder)','Retinal detachment',0),
                        array( 45283008,'Granular corneal dystrophy (disorder)','Granular corneal dystrophy',0),
                        array( 46168003,'Pigmentary glaucoma (disorder)','Pigmentary glaucoma',0),
                        array( 46210008,'Cyst of eyelid (disorder)','Cyst of eyelid',0),
                        array( 46343005,'Exophoria (disorder)','Exophoria',0),
                        array( 47704002,'Blepharochalasis (disorder)','Blepharochalasis',0),
                        array( 50485007,'Low tension glaucoma (disorder)','Low tension glaucoma',0),
                        array( 51286002,'Filamentary keratitis (disorder)','Filamentary keratitis',0),
                        array( 53279002,'Myogenic ptosis (disorder)','Myogenic ptosis',0),
                        array( 53889007,'Nuclear cataract (disorder)','Nuclear cataract',0),
                        array( 57190000,'Myopia (disorder)','Myopia',0),
                        array( 59026006,'Blepharospasm (disorder)','Blepharospasm',0),
                        array( 59276001,'Proliferative diabetic retinopathy (disorder)','Proliferative diabetic retinopathy',0),
                        array( 59523007,'Herpes simplex disciform keratitis (disorder)','Herpes simplex disciform keratitis',0),
                        array( 60258001,'Macular corneal dystrophy (disorder)','Macular corneal dystrophy',0),
                        array( 60332004,'Trichiasis (disorder)','Trichiasis',0),
                        array( 62176008,'Esophoria (disorder)','Esophoria',0),
                        array( 62909004,'Ectropion of eyelid (disorder)','Ectropion',0),
                        array( 63988001,'Intermittent exotropia (disorder)','Intermittent exotropia',0),
                        array( 65636009,'Keratoconus (disorder)','Keratoconus',0),
                        array( 67320001,'Convergence excess (disorder)','Convergence excess',0),
                        array( 68659002,'Blepharoconjunctivitis (disorder)','Blepharoconjunctivitis',0),
                        array( 69278003,'Congenital aniridia (disorder)','Congenital aniridia',0),
                        array( 72789009,'Inflammatory pseudotumor of orbit proper (disorder)','Inflammatory pseudotumour of orbit',0),
                        array( 73442001,'Stevens-Johnson syndrome (disorder)','Stevens-Johnson syndrome',1),
                        array( 74783009,'Stenosis of lacrimal punctum (disorder)','Stenosis of lacrimal punctum',0),
                        array( 75739009,'Salzmann\'s nodular dystrophy (disorder)','Salzmann\'s nodular dystrophy',0),
                        array( 77489003,'Pterygium (disorder)','Pterygium',0),
                        array( 77628002,'Retinal vasculitis (disorder)','Retinal vasculitis',0),
                        array( 79410001,'Congenital cataract (disorder)','Congenital cataract',0),
                        array( 82649003,'Astigmatism (disorder)','Astigmatism',0),
                        array( 83901003,'SjÃ¶gren\'s syndrome (disorder)','SjÃ¶gren\'s syndrome',0),
                        array( 85777005,'Dacryocystitis (disorder)','Dacryocystitis',0),
                        array( 87513003,'Herpes zoster ophthalmicus (disorder)','Herpes zoster ophthalmicus',1),
                        array( 87614000,'Pinguecula (disorder)','Pinguecula',0),
                        array( 91514001,'Corneal ulcer (disorder)','Corneal ulcer',0),
                        array( 95217000,'Pseudophakia (disorder)','Pseudophakia',0),
                        array( 95244005,'Rosacea keratitis (disorder)','Rosacea keratitis',0),
                        array( 95479005,'Congenital sclerocornea (disorder)','Congenital sclerocornea',0),
                        array( 95717004,'Secondary glaucoma (disorder)','Secondary glaucoma',0),
                        array( 95730003,'Marginal keratitis (disorder)','Marginal keratitis',0),
                        array( 95742008,'Corneal graft rejection (disorder)','Corneal graft rejection',0),
                        array(128080005,'Neurotrophic keratitis (disorder)','Neurotrophic keratitis',0),
                        array(128350005,'Bacterial conjunctivitis (disorder)','Bacterial conjunctivitis',0),
                        array(186678004,'Keratoconjunctivitis due to adenovirus (disorder)','Keratoconjunctivitis due to adenovirus',0),
                        array(188272000,'Malignant tumor of lacrimal gland (disorder)','Malignant tumour of lacrimal gland',0),
                        array(193349004,'Preproliferative diabetic retinopathy (disorder)','Preproliferative diabetic retinopathy',0),
                        array(193387007,'Cystoid macular edema (disorder)','Cystoid macular oedema',0),
                        array(193411004,'Dominant drusen (disorder)','Dominant drusen',0),
                        array(193570009,'Cataract (disorder)','Cataract',0),
                        array(193576003,'Cortical cataract (disorder)','Cortical cataract',0),
                        array(193764001,'Dendritic ulcer (disorder)','Dendritic ulcer',0),
                        array(193839007,'Fuchs\' corneal dystrophy (disorder)','Fuchs\' corneal dystrophy',0),
                        array(194005002,'Orbital cellulitis (disorder)','Orbital cellulitis',0),
                        array(194131002,'Convergence insufficiency (disorder)','Convergence insufficiency',0),
                        array(204118005,'Congenital keratoglobus (disorder)','Congenital keratoglobus',0),
                        array(204153003,'Irido-corneo-trabecular dysgenesis (disorder)','Irido-corneo-trabecular dysgenesis',0),
                        array(230670003,'Familial infantile myasthenia (disorder)','Familial infantile myasthenia',1),
                        array(231793006,'Acquired anophthalmos (disorder)','Acquired anophthalmos',0),
                        array(231855007,'Seasonal allergic conjunctivitis (disorder)','Seasonal allergic conjunctivitis',0),
                        array(231857004,'Giant papillary conjunctivitis (disorder)','Giant papillary conjunctivitis',0),
                        array(231861005,'Chlamydial conjunctivitis (disorder)','Chlamydial conjunctivitis',0),
                        array(231879009,'Perforating scleral wound (disorder)','Perforating scleral wound',0),
                        array(231880007,'Perforating corneoscleral wound (disorder)','Perforating corneoscleral wound',0),
                        array(231881006,'Scleral rupture (disorder)','Scleral rupture',0),
                        array(231896005,'Acanthamoeba keratitis (disorder)','Acanthamoeba keratitis',0),
                        array(231903005,'Superior limbic keratoconjunctivitis (disorder)','Superior limbic keratoconjunctivitis',0),
                        array(231907006,'Disciform keratitis (disorder)','Disciform keratitis',0),
                        array(231908001,'Lipid keratopathy (disorder)','Lipid keratopathy',0),
                        array(231909009,'Infectious crystalline keratopathy (disorder)','Infectious crystalline keratopathy',0),
                        array(231911000,'Superficial corneal vascularization (disorder)','Superficial corneal vascularisation',0),
                        array(231930000,'Reis-Bucklers\' corneal dystrophy (disorder)','Reis-Bucklers\' corneal dystrophy',0),
                        array(231938007,'Pellucid marginal corneal degeneration (disorder)','Pellucid marginal corneal degeneration',0),
                        array(232000008,'Choroidal effusion (disorder)','Choroidal effusion',0),
                        array(232003005,'Retinal dialysis (disorder)','Retinal dialysis',0),
                        array(232004004,'Giant retinal tear (disorder)','Giant retinal tear',0),
                        array(232006002,'Macular hole (disorder)','Macular hole',0),
                        array(232008001,'Rhegmatogenous retinal detachment - macula on (disorder)','Rhegmatogenous retinal detachment - macula on',0),
                        array(232009009,'Rhegmatogenous retinal detachment - macula off (disorder)','Rhegmatogenous retinal detachment - macula off',0),
                        array(232012007,'Combined traction and rhegmatogenous retinal detachment (disorder)','Combined traction and rhegmatogenous retinal detachment',0),
                        array(232015009,'Solid retinal detachment (disorder)','Solid retinal detachment',0),
                        array(232016005,'Proliferative vitreoretinopathy (disorder)','Proliferative vitreoretinopathy',0),
                        array(232020009,'Diabetic maculopathy (disorder)','Diabetic maculopathy',0),
                        array(232023006,'Diabetic traction retinal detachment (disorder)','Diabetic traction retinal detachment',0),
                        array(232064001,'Wagner syndrome (disorder)','Wagner syndrome',0),
                        array(232101009,'Fully accommodative esotropia (disorder)','Fully accommodative esotropia',0),
                        array(246938006,'Corneal dellen (disorder)','Corneal dellen',0),
                        array(247081001,'osterior vitreous detachment (disorder)','Posterior vitreous detachment',0),
                        array(247098001,'Subhyaloid hemorrhage (disorder)','Subhyaloid haemorrhage',0),
                        array(247168006,'Retinal "U" tear (disorder)','Retinal "U" tear',0),
                        array(247179001,'Peripheral drusen (disorder)','Peripheral drusen',0),
                        array(253230008,'Congenital anterior staphyloma (disorder)','Congenital anterior staphyloma',0),
                        array(255004001,'Malignant melanoma of conjunctiva (disorder)','Malignant melanoma of conjunctiva',0),
                        array(255005000,'Papilloma of conjunctiva (disorder)','Papilloma of conjunctiva',0),
                        array(255021005,'Malignant melanoma of choroid (disorder)','Malignant melanoma of choroid',0),
                        array(255024002,'Nevus of choroid (disorder)','Naevus of choroid',0),
                        array(267626000,'Hypermature cataract (disorder)','Hypermature cataract',0),
                        array(268160006,'Congenital corneal opacity (disorder)','Congenital corneal opacity',0),
                        array(276177000,'Thyroid eye disease (disorder)','Thyroid eye disease',0),
                        array(299699004,'Infective conjunctivitis (disorder)','Infective conjunctivitis',0),
                        array(302888003,'Retinal round hole (disorder)','Retinal round hole',0),
                        array(302896008,'Keratoconjunctivitis sicca (disorder)','Keratoconjunctivitis sicca',0),
                        array(302905001,'Aspergillus otomycosis (disorder)','Aspergillus otomycosis',1),
                        array(302911003,'Acute lingual tonsillitis (disorder)','Acute lingual tonsillitis',1),
                        array(312696001,'Retained lens matter in vitreous (disorder)','Retained lens matter in vitreous',0),
                        array(312901001,'Vitreomacular traction syndrome (disorder)','Vitreomacular traction syndrome',0),
                        array(312928006,'Multifocal inner choroiditis (disorder)','Multifocal inner choroiditis',0),
                        array(314015001,'Mixed diabetic maculopathy (disorder)','Mixed diabetic maculopathy',0),
                        array(314552006,'Corneal graft astigmatism (disorder)','Corneal graft astigmatism',0),
                        array(314554007,'Corneal graft vascularization (disorder)','Corneal graft vascularisation',0),
                        array(314557000,'Bacterial keratitis (disorder)','Bacterial keratitis',0),
                        array(314558005,'Fungal keratitis (disorder)','Fungal keratitis',0),
                        array(314561006,'Sterile keratitis (disorder)','Sterile keratitis',0),
                        array(314562004,'Contact lens related sterile keratitis (disorder)','Contact lens related sterile keratitis',0),
                        array(314758008,'Posterior keratoconus (disorder)','Posterior keratoconus',0),
                        array(314760005,'Corneal graft failure (disorder)','Corneal graft failure',0),
                        array(314764001,'Corneal melting disorder (disorder)','Corneal melting disorder',0),
                        array(314765000,'Rheumatoid melting disorder of cornea (disorder)','Rheumatoid melting disorder of cornea',0),
                        array(317349009,'Vernal keratoconjunctivitis (disorder)','Vernal keratoconjunctivitis',0),
                        array(363462005,'Malignant tumor of orbit (disorder)','Malignant tumour of orbit',0),
                        array(363463000,'Malignant tumor of conjunctiva (disorder)','Malignant tumour of conjunctiva',0),
                        array(367649002,'Epiretinal membrane (disorder)','Epiretinal membrane',0),
                        array(387742006,'Amblyopia (disorder)','Amblyopia',0),
                        array(390834004,'Nonproliferative diabetic retinopathy (disorder)','Nonproliferative diabetic retinopathy',0),
                        array(390909000,'Extrusion of scleral buckle (disorder)','Extrusion of scleral buckle',0),
                        array(392141001,'Epithelial ingrowth (disorder)','Epithelial ingrowth',0),
                        array(392288006,'Primary angle-closure glaucoma (disorder)','Primary angle-closure glaucoma',0),
                        array(399054005,'Exotropia (disorder)','Exotropia',0),
                        array(410692006,'Anterior uveitis (disorder)','Anterior uveitis',0),
                        array(415172002,'Primary acquired melanosis (disorder)','Primary acquired melanosis',0),
                        array(415735001,'Toxic keratoconjunctivitis (disorder)','Toxic keratoconjunctivitis',0),
                        array(416069001,'Thygeson superficial punctate keratitis (disorder)','Thygeson superficial punctate keratitis',0),
                        array(416300008,'Punctate epithelial keratitis (disorder)','Punctate epithelial keratitis',0),
                        array(416473005,'Peripheral ulcerative keratitis (disorder)','Peripheral ulcerative keratitis',0),
                        array(417303004,'Retinal vasculitis due to systemic lupus erythematosus (disorder)','Retinal vasculitis due to systemic lupus erythematosus',0),
                        array(417651000,'Congenital hereditary endothelial dystrophy (disorder)','Congenital hereditary endothelial dystrophy',0),
                        array(418134006,'Conjunctival intraepithelial neoplasia (disorder)','Conjunctival intraepithelial neoplasia',0),
                        array(419197009,'Lattice corneal dystrophy Type I (disorder)','Lattice corneal dystrophy Type I',0),
                        array(420342002,'Calcific band keratopathy (disorder)','Calcific band keratopathy',0),
                        array(421040007,'Vortex keratopathy (disorder)','Vortex keratopathy',0)
		);

		$cods = array(
			array(1,1482004,2),
			array(2,62909004,2),
			array(3,30410001,2),
			array(4,53279002,2),
			array(5,74783009,2),
			array(6,194005002,2),
			array(7,31056006,2),
			array(8,231793006,2),
			array(9,60332004,2),
			array(10,33168009,2),
			array(11,46210008,2),
			array(12,188272000,2),
			array(13,363462005,2),
			array(14,72789009,2),
			array(15,47704002,2),
			array(16,85777005,2),
			array(17,276177000,2),
			array(18,59026006,2),
			array(19,24010005,4),
			array(20,79410001,4),
			array(21,230670003,4),
			array(22,38583007,4),
			array(23,95217000,4),
			array(24,34361001,4),
			array(25,34533008,4),
			array(26,53889007,4),
			array(27,193570009,4),
			array(28,193576003,4),
			array(29,267626000,4),
			array(30,231896005,5),
			array(31,186678004,6),
			array(32,231855007,6),
			array(33,69278003,6),
			array(34,204153003,5),
			array(35,410692006,6),
			array(36,24010005,6),
//			array(37,403434009,6),
			array(38,128350005,6),
			array(39,420342002,5),
			array(40,41446000,6),
			array(41,47704002,6),
			array(42,68659002,6),
			array(43,193570009,6),
			array(44,231861005,6),
			array(45,253230008,6),
			array(46,268160006,5),
			array(47,417651000,5),
			array(48,95479005,6),
			array(49,418134006,6),
			array(50,9826008,6),
			array(51,314562004,5),
			array(52,246938006,5),
			array(53,5587004,5),
			array(54,14748007,5),
			array(55,314552006,5),
			array(56,314760005,5),
			array(57,95742008,5),
			array(58,314554007,5),
			array(59,314764001,5),
			array(60,91514001,5),
			array(61,231911000,5),
			array(62,193764001,5),
			array(63,231907006,5),
			array(64,392141001,5),
			array(65,51286002,5),
			array(66,193839007,5),
			array(67,314558005,5),
			array(68,231857004,6),
			array(69,45283008,5),
			array(70,29943008,5),
			array(71,59523007,5),
			array(72,87513003,6),
			array(73,231909009,5),
			array(74,299699004,6),
			array(75,1763009,5),
			array(76,5888003,5),
			array(77,302896008,6),
			array(78,65636009,5),
			array(79,204118005,5),
			array(80,419197009,5),
			array(81,231908001,5),
			array(82,60258001,5),
			array(83,255004001,6),
			array(84,95730003,5),
			array(85,1674008,5),
			array(86,26098002,5),
			array(87,22440001,5),
			array(88,34250006,6),
			array(89,128080005,5),
			array(90,255005000,6),
			array(91,231938007,6),
			array(92,416473005,5),
			array(93,87614000,6),
			array(94,314758008,5),
			array(95,29504002,5),
			array(96,415172002,6),
			array(97,77489003,6),
			array(98,416300008,5),
			array(99,2055003,5),
			array(100,231930000,5),
			array(101,314765000,6),
			array(102,95244005,5),
			array(103,75739009,5),
			array(104,95717004,6),
			array(105,83901003,6),
			array(106,314561006,6),
			array(107,73442001,6),
			array(108,231903005,6),
			array(109,314557000,5),
			array(110,27971006,5),
			array(111,416069001,5),
			array(112,415735001,6),
			array(113,60332004,6),
			array(114,363463000,6),
			array(115,317349009,6),
			array(116,421040007,5),
			array(117,24010005,7),
			array(118,232000008,7),
			array(119,95217000,7),
			array(120,232064001,7),
			array(121,302905001,7),
			array(122,95717004,7),
			array(123,4210003,7),
			array(124,392288006,7),
			array(125,50485007,7),
			array(126,46168003,7),
			array(127,30041005,7),
			array(128,33647009,7),
			array(129,247081001,8),
			array(130,31341008,8),
			array(131,4927003,8),
			array(132,232000008,8),
			array(133,77628002,8),
			array(134,417303004,8),
			array(135,367649002,8),
			array(136,255021005,8),
			array(137,255024002,8),
			array(138,38599001,8),
			array(139,42059000,8),
			array(140,232012007,8),
			array(141,232015009,8),
			array(142,232023006,8),
			array(143,302911003,8),
			array(144,387742006,8),
			array(145,312928006,8),
			array(146,314015001,8),
			array(147,4855003,8),
			array(148,59276001,8),
			array(149,193349004,8),
			array(150,390834004,8),
			array(151,193387007,8),
			array(152,30523006,8),
			array(153,193411004,8),
			array(154,247179001,8),
			array(155,16596007,14),
			array(156,399054005,14),
			array(157,62176008,14),
			array(158,46343005,14),
			array(159,194131002,14),
			array(160,67320001,14),
			array(161,232101009,14),
			array(162,27590007,14),
			array(163,63988001,14),
			array(164,387742006,14),
			array(165,276177000,14),
			array(166,38101003,14),
			array(167,57190000,14),
			array(168,82649003,14),
			array(169,232009009,16),
			array(170,232008001,16),
			array(171,34711008,16),
			array(172,232012007,16),
			array(173,38599001,16),
			array(174,247168006,16),
			array(175,302888003,16),
			array(176,232003005,16),
			array(177,232004004,16),
			array(178,232006002,16),
			array(179,247081001,16),
			array(180,31341008,16),
			array(181,247098001,16),
			array(182,232016005,16),
			array(183,367649002,16),
			array(184,312901001,16),
			array(185,1847009,16),
			array(186,232000008,16),
			array(187,95217000,16),
			array(188,312696001,16),
			array(189,232020009,16),
			array(190,59276001,16),
			array(191,3577000,16),
			array(192,193570009,16),
			array(193,57190000,16),
			array(194,231879009,16),
			array(195,231880007,16),
			array(196,231881006,16),
			array(197,390909000,16)
		);

                foreach ($disorders as $disorder) {
                        $this->insert('disorder', array(
				'id' => $disorder[0],
                                'fully_specified_name' => $disorder[1],
                                'term' => $disorder[2],
				'systemic'=>$disorder[3]
                        ));
                }

		foreach ($cods as $cod) {
			$this->insert('common_ophthalmic_disorder', array(
				'disorder_id' => $cod[1],
				'specialty_id' => $cod[2]
			));
		}
	}

	public function down()
	{
		$this->truncateTable('common_ophthalmic_disorder');
		$this->truncateTable('disorder');
	}
}
